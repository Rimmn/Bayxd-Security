name: ğŸ”’ Protect Specific Files

on:
  push:
    branches: [main]
    paths:
      # FILE YANG MAU DIPROTEKSI:
      - 'handler.js'
      - 'scurity.js'
      - 'index.js'
      - 'database.js'
      - 'settings.js'
      - 'config.js'
      - 'database.json'
      - 'data/owner.json'
      - 'src/config/env.js'
      - 'control/security.js'
      - 'control/database.js'
      - '.env'

jobs:
  protect:
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ” Check Modified Files
        run: |
          echo "=== FILE PROTECTION CHECK ==="
          echo "User: ${{ github.actor }}"
          echo "Event: ${{ github.event_name }}"
          echo "Branch: ${{ github.ref }}"
          echo ""
          
      - name: ğŸ” Verify Owner
        run: |
          # HANYA RIMMN YANG BOLEH
          if [ "${{ github.actor }}" != "Rimmn" ]; then
            echo "âŒ ERROR: User '${{ github.actor }}' not authorized!"
            echo ""
            echo "ğŸ“‹ LIST FILE YANG DIPROTEKSI:"
            echo "1. handler.js"
            echo "2. scurity.js"
            echo "3. index.js"
            echo "4. database.js"
            echo "5. settings.js"
            echo "6. config.js"
            echo "7. database.json"
            echo "8. data/owner.json"
            echo "9. src/config/env.js"
            echo "10. control/security.js"
            echo "11. control/database.js"
            echo "12. .env"
            echo ""
            echo "âš ï¸  Hanya 'Rimmn' yang boleh modifikasi file ini!"
            echo "ğŸ“ Hubungi owner jika perlu perubahan."
            exit 1
          fi
          
          echo "âœ… AUTHORIZED: User '${{ github.actor }}' adalah Rimmn"
      
      - name: âœ… Success
        run: |
          echo "=========================================="
          echo "ğŸ‰ FILE MODIFICATION APPROVED"
          echo "=========================================="
          echo "ğŸ‘¤ User: ${{ github.actor }}"
          echo "ğŸ“ Status: VERIFIED OWNER"
          echo "ğŸ”’ Protected files: 12 files"
          echo "ğŸ•’ Time: $(date)"
          echo "=========================================="
