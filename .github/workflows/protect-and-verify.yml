name: üîê LOCK HIGH-RISK FILES

on:
  push:
    branches: [main]
    paths:
      # FILE PALING BERBAHAYA JIKA DIBOBOL:
      - 'scurity.js'          # ADA TOKEN GITHUB!
      - 'database.json'       # DATABASE USER
      - 'data/owner.json'     # DATA OWNER
      - 'data/sewa.json'      # DATA PREMIUM
      - 'settings.js'         # KONFIGURASI BOT
      - 'config.js'           # CONFIG HANDLER

jobs:
  high-risk-protection:
    runs-on: ubuntu-latest
    
    steps:
      - name: üö® ALERT - HIGH RISK FILES
        run: |
          echo "=========================================="
          echo "üö® HIGH-RISK FILES PROTECTION ACTIVATED!"
          echo "=========================================="
          echo "User: ${{ github.actor }}"
          echo "Repository: ${{ github.repository }}"
          echo ""
          echo "‚ö†Ô∏è  These files contain SENSITIVE data!"
          echo "=========================================="
      
      - name: üîê STRICT OWNER VERIFICATION
        run: |
          # HANYA KAMU YANG BOLEH!
          ALLOWED="Rimmn"
          CURRENT="${{ github.actor }}"
          
          echo "=== HIGH-RISK AUTHORIZATION ==="
          echo "Checking: $CURRENT"
          echo "Allowed: $ALLOWED"
          echo ""
          
          if [ "$CURRENT" != "$ALLOWED" ]; then
            echo "‚ùå‚ùå‚ùå SECURITY BREACH ATTEMPT! ‚ùå‚ùå‚ùå"
            echo ""
            echo "=========================================="
            echo "üö´ UNAUTHORIZED ACCESS TO SENSITIVE FILES!"
            echo "=========================================="
            echo "User '$CURRENT' tried to access:"
            echo ""
            echo "üî¥ CRITICAL FILES:"
            echo "1. scurity.js     ‚Üí Contains GitHub Token!"
            echo "2. database.json  ‚Üí User database"
            echo "3. data/owner.json ‚Üí Bot owners list"
            echo "4. data/sewa.json  ‚Üí Premium users"
            echo "5. settings.js    ‚Üí Bot configuration"
            echo "6. config.js      ‚Üí Handler config"
            echo ""
            echo "‚ö†Ô∏è  These files can ONLY be modified by:"
            echo "    '$ALLOWED'"
            echo "=========================================="
            exit 1
          fi
          
          echo "‚úÖ SECURITY CLEARANCE GRANTED"
          echo "User '$CURRENT' is authorized"
      
      - name: üìä FILE CHANGE REPORT
        run: |
          echo "=== FILE MODIFICATION REPORT ==="
          echo "Authorized change by: ${{ github.actor }}"
          echo ""
          echo "Modified high-risk files:"
          
          # Check which high-risk files were changed
          HIGH_RISK_FILES="scurity.js database.json data/owner.json data/sewa.json settings.js config.js"
          
          for file in $HIGH_RISK_FILES; do
            if [ -f "$file" ]; then
              echo "‚Ä¢ $file"
            fi
          done
      
      - name: ‚úÖ SECURITY CHECK PASSED
        run: |
          echo "=========================================="
          echo "üîì SECURE FILE MODIFICATION COMPLETE"
          echo "=========================================="
          echo "‚úÖ All security checks passed"
          echo "‚úÖ User authorization verified"
          echo "‚úÖ High-risk files protected"
          echo ""
          echo "Modified by: ${{ github.actor }}"
          echo "Status: AUTHORIZED"
          echo "Time: $(date)"
          echo "=========================================="
